<div class="card">
  <div class="card-block table-responsive">
    <div class="pull-right">
      <div class="star">
        <i class="fa fa-star" [ngClass]="{'active': product.ratingAvg > 0}"></i>
        <i class="fa fa-star" [ngClass]="{'active': product.ratingAvg > 1}"></i>
        <i class="fa fa-star" [ngClass]="{'active': product.ratingAvg > 2}"></i>
        <i class="fa fa-star" [ngClass]="{'active': product.ratingAvg > 3}"></i>
        <i class="fa fa-star" [ngClass]="{'active': product.ratingAvg > 4}"></i>
      </div>
      {{total}} Reviews
    </div>
    <table class="table">
      <thead>
        <tr>
          <th>
            <a (click)="sortBy('rater.name', 'desc')">Rater</a>
            <span *ngIf="sortOption.sortBy=='rater.name'">
              <a (click)="sortBy('rater.name', 'asc')" *ngIf="sortOption.sortType=='desc'"><i class="fa fa-caret-down"></i></a>
              <a (click)="sortBy('rater.name', 'desc')" *ngIf="sortOption.sortType=='asc'"><i class="fa fa-caret-up"></i></a>
            </span>
          </th>
          <th>
            <a (click)="sortBy('comment', 'desc')">Comment</a>
            <span *ngIf="sortOption.sortBy=='comment'">
              <a (click)="sortBy('comment', 'asc')" *ngIf="sortOption.sortType=='desc'"><i class="fa fa-caret-down"></i></a>
              <a (click)="sortBy('comment', 'desc')" *ngIf="sortOption.sortType=='asc'"><i class="fa fa-caret-up"></i></a>
            </span>
          </th>
          <th>
            <a (click)="sortBy('rating', 'desc')">Rating</a>
            <span *ngIf="sortOption.sortBy=='rating'">
              <a (click)="sortBy('rating', 'asc')" *ngIf="sortOption.sortType=='desc'"><i class="fa fa-caret-down"></i></a>
              <a (click)="sortBy('rating', 'desc')" *ngIf="sortOption.sortType=='asc'"><i class="fa fa-caret-up"></i></a>
            </span>
          </th>
          <th>
            <a (click)="sortBy('createdAt', 'desc')">Created at</a>
            <span *ngIf="sortOption.sortBy=='createdAt'">
              <a (click)="sortBy('createdAt', 'asc')" *ngIf="sortOption.sortType=='desc'"><i class="fa fa-caret-down"></i></a>
              <a (click)="sortBy('createdAt', 'desc')" *ngIf="sortOption.sortType=='asc'"><i class="fa fa-caret-up"></i></a>
            </span>
          </th>
          <th>
            Actions
          </th>
        </tr>
        <tr>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th>
            <!-- <a class="btn btn-success" (click)="query()">Query</a> -->
          </th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of items, let i = index">
          <td>{{item?.rater?.name}}</td>
          <td>{{item.comment}}</td>
          <td>
            <div class="star">
              <i class="fa fa-star" [ngClass]="{'active': item.rating > 0}"></i>
              <i class="fa fa-star" [ngClass]="{'active': item.rating > 1}"></i>
              <i class="fa fa-star" [ngClass]="{'active': item.rating > 2}"></i>
              <i class="fa fa-star" [ngClass]="{'active': item.rating > 3}"></i>
              <i class="fa fa-star" [ngClass]="{'active': item.rating > 4}"></i>
            </div>
          </td>
          <td>
            <span>{{item.createdAt | date}}</span>
          </td>
          <td>
            <a (click)="remove(item._id, i)">
              <i class="fa fa-trash"></i>
            </a>
          </td>
        </tr>
      </tbody>
      <tfoot>
        <tr>
          <td colspan="8" *ngIf="total > 10">
            <ngb-pagination [collectionSize]="total" [maxSize]="5" [(page)]="page" (pageChange)="query()"></ngb-pagination>
          </td>
        </tr>
      </tfoot>
    </table>
  </div>
</div>